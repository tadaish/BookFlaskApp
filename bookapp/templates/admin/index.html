{% extends 'admin/master.html' %}

{% block body %}

{% if current_user.is_authenticated %}

<div class="row mt-5 d-flex justify-content-around">
    <div class="card shadow" style="width: 12rem;">
        <div class="card-body">
            <h5 class="card-title">Thể loại</h5>
            <p class="card-text">{{count[0]}}</p>
        </div>
    </div>
    <div class="card  shadow" style="width: 12rem;">
        <div class="card-body">
            <h5 class="card-title">Sách</h5>
            <p class="card-text">{{count[1]}}</p>
        </div>
    </div>
    <div class="card shadow" style="width: 12rem;">
        <div class="card-body">
            <h5 class="card-title">Người dùng</h5>
            <p class="card-text">{{count[2]}}</p>
        </div>
    </div>
    <div class="card  shadow" style="width: 12rem;">
        <div class="card-body">
            <h5 class="card-title">Số đơn hàng</h5>
            <p class="card-text">{{count[3]}}</p>
        </div>
    </div>
    <div class="card shadow" style="width: 12rem;">
        <div class="card-body">
            <h5 class="card-title">Tổng doanh thu</h5>
            <p class="card-text"></p>
        </div>
    </div>
</div>
<div class="row card mt-5">
    <div class="col-md-7 col-12 mt-5">
        <canvas id="myChart" width="200" height="200"></canvas>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/stats.js') }}"></script>
<script>
    let labels = [];
    let data = [];
    {% for s in stats %}
        data.push({{ s[2] }});
        labels.push('{{ s[1] }}');
    {% endfor %}
    window.onload = function() {
        drawChart("pie", data, labels);
    }
</script>
{% else %}
<h2 class="text-center text-info mt-5">Đăng nhập</h2>
<form method="post" action="/admin-login">
    <div class="mx-auto w-50">
        <div class="form-group mb-3 mt-3">
            <label for="username">Tên đăng nhập</label>
            <input type="text" class="form-control" id="username" placeholder="Tên đăng nhập" name="username"
                   pattern="[a-zA-Z0-9]*" required>
        </div>

        <div class="form-group mt-3 mb-3">
            <label for="password">Mật khẩu</label>
            <input type="password" class="form-control" id="password" placeholder="Mật khẩu" name="password" required>

        </div>

        <div class="form-floating mt-3 mb-3">
            <button class="btn btn-success" type="submit">Đăng nhập</button>
        </div>
    </div>

</form>
{% endif %}


{% endblock %}